<p-toast></p-toast>
<div class="text-center mb-8 animate-fadein">
    <h1 class="text-3xl font-bold text-gray-800">Nueva Contraseña</h1>
    <p class="text-gray-500 mt-2">Por favor, establece tu nueva contraseña de acceso.</p>
</div>

<form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="space-y-6 animate-fadein">
    <div class="flex flex-col gap-2">
        <label for="newPassword" class="text-sm font-medium text-gray-700">Contraseña Nueva</label>
        <p-iconfield iconPosition="left" class="w-full">
            <p-inputicon class="pi pi-lock text-gray-400 z-10"></p-inputicon>
            <p-password 
                id="newPassword" 
                formControlName="password"
                [toggleMask]="true" 
                [feedback]="true" 
                placeholder="**********" 
                styleClass="w-full"
                inputStyleClass="w-full pl-10 h-12 rounded-full border-gray-300 focus:ring-[#ffed00] focus:border-[#ffed00]"
                [invalid]="(passwordForm.get('password')?.invalid || passwordForm.hasError('passwordMismatch')) && passwordForm.get('password')?.touched"
            ></p-password>
        </p-iconfield>
        <small class="text-red-500 ml-4" *ngIf="passwordForm.get('password')?.invalid && passwordForm.get('password')?.touched">
            <span *ngIf="passwordForm.get('password')?.errors?.['required']">La contraseña es obligatoria.</span>
            <span *ngIf="passwordForm.get('password')?.errors?.['minlength']">Mínimo 6 caracteres.</span>
        </small>
    </div>

    <div class="flex flex-col gap-2">
        <label for="confirmPassword" class="text-sm font-medium text-gray-700">Confirmar Contraseña</label>
        <p-iconfield iconPosition="left" class="w-full">
            <p-inputicon class="pi pi-lock text-gray-400 z-10"></p-inputicon>
            <p-password 
                id="confirmPassword" 
                formControlName="confirmPassword"
                [toggleMask]="true" 
                [feedback]="false" 
                placeholder="**********" 
                styleClass="w-full"
                inputStyleClass="w-full pl-10 h-12 rounded-full border-gray-300 focus:ring-[#ffed00] focus:border-[#ffed00]"
                [invalid]="(passwordForm.get('confirmPassword')?.invalid || passwordForm.hasError('passwordMismatch')) && passwordForm.get('confirmPassword')?.touched"
            ></p-password>
        </p-iconfield>
        <small class="text-red-500 ml-4" *ngIf="passwordForm.get('confirmPassword')?.touched">
            <span *ngIf="passwordForm.get('confirmPassword')?.errors?.['required']">Debe confirmar la contraseña.</span>
            <span *ngIf="passwordForm.hasError('passwordMismatch') && !passwordForm.get('confirmPassword')?.errors?.['required']">Las contraseñas no coinciden.</span>
        </small>
    </div>

    <button 
        pButton 
        type="submit" 
        label="Restablecer Contraseña" 
        [loading]="loading"
        class="w-full h-12 rounded-full bg-[#ffed00] border-none text-black font-bold hover:bg-[#e6d500] transition-colors"
    ></button>
</form>
